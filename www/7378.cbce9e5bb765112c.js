"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7378],{7378:(Y,g,a)=>{a.r(g),a.d(g,{UserFeedbackPageModule:()=>O});var l=a(9808),d=a(4182),o=a(2159),u=a(127),f=a(2654),m=a(3577);class h{constructor(n){this.data=n||[]}}class b{constructor(n){this.pipe=new l.uU("en-US"),this.comments=n.comments||"",this.created_at=this.pipe.transform(n.created_at,"fullDate")||"",this.data=JSON.parse(n.data)||"",this.total=n.total||""}}var v=a(2340),e=a(9863),p=a(7859);function _(s,n){if(1&s&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&s){const t=n.$implicit,i=e.oxw();e.s9C("value",t),e.Q6J("selected",t==i.currentYear),e.xp6(1),e.hij(" ",t," ")}}function w(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"ion-col",20),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).setOpen(!0,c)}),e.TgZ(1,"ion-row")(2,"ion-col")(3,"ion-row")(4,"ion-col")(5,"ion-text",21),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-row")(8,"ion-col"),e._UZ(9,"app-star-rating",22),e.qZA()(),e.TgZ(10,"ion-row")(11,"ion-col")(12,"ion-text")(13,"b"),e._uU(14,"Comments: "),e.qZA()(),e.TgZ(15,"ion-text",23),e._uU(16),e.qZA()()()()()()}if(2&s){const t=n.$implicit;e.xp6(6),e.Oqu(t.created_at),e.xp6(3),e.Q6J("isDisabled",!0)("selectedValue",t.total),e.xp6(7),e.Oqu(t.comments)}}function x(s,n){if(1&s&&(e.TgZ(0,"ion-grid")(1,"ion-row"),e.YNc(2,w,17,4,"ion-col",19),e.qZA()()),2&s){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.userReviews)}}function U(s,n){1&s&&(e.TgZ(0,"p",24),e._uU(1,"No Results found."),e.qZA())}function Z(s,n){if(1&s&&(e.TgZ(0,"ion-col",29)(1,"label",30),e._uU(2),e.qZA(),e._UZ(3,"app-star-rating",22),e.qZA()),2&s){const t=n.$implicit,i=e.oxw(2);e.xp6(2),e.Oqu(t.label),e.xp6(1),e.Q6J("isDisabled",!0)("selectedValue",i.filterSelectValue(t.name))}}function F(s,n){if(1&s&&(e.TgZ(0,"p",31)(1,"b"),e._uU(2,"Comments:"),e.qZA(),e._UZ(3,"br"),e._uU(4),e.qZA()),2&s){const t=e.oxw(2);e.xp6(4),e.hij("",t.selectedRwItem.comments," ")}}function k(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Review details"),e.qZA(),e.TgZ(4,"ion-buttons",25)(5,"ion-button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().setOpen(!1)}),e._uU(6,"Close"),e.qZA()()()(),e.TgZ(7,"ion-content",0)(8,"ion-row"),e.YNc(9,Z,4,3,"ion-col",27),e.qZA(),e.YNc(10,F,5,1,"p",28),e.qZA()}if(2&s){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.questions),e.xp6(1),e.Q6J("ngIf",t.selectedRwItem.comments)}}const T=[{path:"",component:(()=>{class s{constructor(t,i,r,c){this.activeroute=t,this.router=i,this.userReviewService=r,this.questionService=c,this.subscriptions=new f.w,this.menus=[{name:"Users",href:"/main/users"}],this.user=[],this.selectBoxYear=[2022,2023],this.currentYear=(new Date).getFullYear(),this.selectedYear=2022,this.userReviews=[],this.isModalOpen=!1}ngOnInit(){this.subscriptions.add(this.activeroute.queryParams.subscribe(t=>{let i=this.router.getCurrentNavigation().extras.state;i?(this.user=i,this.menus[1]={name:null==i?void 0:i.name,class:"active"},this.getAllreview(),this.getReviewQuestions()):this.router.navigate(["/main/users"])}))}userAvatar(t){return`${v.N.apiURL}/user/${t}/avatar`}setOpen(t,i){console.log(t),this.isModalOpen=t,t&&(this.selectedRwItem=i)}getReviewQuestions(){this.subscriptions.add(this.questionService.getQuestions().subscribe(t=>{this.questions=t.data}))}filterSelectValue(t){let i;return this.selectedRwItem.data.forEach(r=>{r[t]&&null!=r[t]&&null!=r[t]&&(i=r[t])}),i}getAllreview(){this.userReviews=[],this.subscriptions.add(this.userReviewService.getAllreviews(this.user.uuid,this.selectedYear).subscribe(t=>{new h(t.data).data.filter(r=>{this.userReviews.push(new b(r))})}))}changYear(t){this.selectedYear=t,this.getAllreview()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(m.Pj),e.Y36(m.qJ))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-feedback"]],decls:29,vars:9,consts:[[1,"ion-padding"],[1,"m-t-4"],[3,"menus"],[1,"card-header"],["size","12","size-sm","8"],["size","3","size-sm","2"],["item-left","",1,"user-thumbnail-default"],[3,"src"],["size","9","size-sm","10"],["color","primary"],["size","12","size-sm","4"],[1,"form-floating"],["aria-label","Floating label select example",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","floatingSelect"],[4,"ngIf","ngIfElse"],["emptyMessage",""],[3,"isOpen","backdropDismiss"],[3,"value","selected"],["size","12","size-sm","6","class","user-card","expand","block",3,"click",4,"ngFor","ngForOf"],["size","12","size-sm","6","expand","block",1,"user-card",3,"click"],["color","medium"],[3,"isDisabled","selectedValue"],["color","medium",1,"user-cmts"],[1,"label","label-warning"],["slot","end"],[3,"click"],["size","12","size-sm","6",4,"ngFor","ngForOf"],["class","hg-comments",4,"ngIf"],["size","12","size-sm","6"],[1,"form-label"],[1,"hg-comments"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-grid",1),e._UZ(2,"app-breadcrumb",2),e.TgZ(3,"ion-row",3)(4,"ion-col",4)(5,"ion-row")(6,"ion-col",5)(7,"ion-thumbnail",6),e._UZ(8,"img",7),e.qZA()(),e.TgZ(9,"ion-col",8)(10,"ion-row")(11,"ion-col")(12,"ion-text"),e._uU(13),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col")(16,"ion-text",9),e._uU(17),e.qZA()()()()()(),e.TgZ(18,"ion-col",10)(19,"div",11)(20,"select",12),e.NdJ("change",function(c){return i.changYear(c.target.value)}),e.YNc(21,_,2,3,"option",13),e.qZA(),e.TgZ(22,"label",14),e._uU(23,"Select Year"),e.qZA()()()()(),e.YNc(24,x,3,1,"ion-grid",15),e.YNc(25,U,2,0,"ng-template",null,16,e.W1O),e.TgZ(27,"ion-modal",17),e.YNc(28,k,11,2,"ng-template"),e.qZA()()),2&t){const r=e.MAs(26);e.xp6(2),e.Q6J("menus",i.menus),e.xp6(6),e.s9C("src",i.userAvatar(i.user.uuid),e.LSH),e.xp6(5),e.Oqu(i.user.name),e.xp6(4),e.hij(" (",i.user.email,") "),e.xp6(4),e.Q6J("ngForOf",i.selectBoxYear),e.xp6(3),e.Q6J("ngIf",i.userReviews.length>0)("ngIfElse",r),e.xp6(3),e.Q6J("isOpen",i.isModalOpen)("backdropDismiss",!1)}},directives:[o.W2,o.jY,p.LI,o.Nd,o.wI,o.Bs,o.yW,l.sg,d.YN,d.Kr,l.O5,p.Te,o.ki,o.Gu,o.sr,o.wd,o.Sm,o.YG],styles:[".user-cmts[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.card-header[_ngcontent-%COMP%]{background:#f4f4f4;margin:16px 8px;padding:0 10px}.form-floating[_ngcontent-%COMP%]{margin:10px 0}.hg-comments[_ngcontent-%COMP%]{margin-top:2rem;background:#f3f3f3;padding:1rem}"]}),s})()}];let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[u.Bz.forChild(T)],u.Bz]}),s})();var P=a(7205);let O=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[l.ez,d.u5,o.Pc,A,P.m]]}),s})()}}]);