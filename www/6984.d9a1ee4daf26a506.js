"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6984],{6984:(A,g,a)=>{a.r(g),a.d(g,{YourFeedbackPageModule:()=>I});var l=a(9808),s=a(4182),c=a(2159),_=a(127),m=a(2654),u=a(3577);class f{constructor(i){this.id=i.id||"",this.name=i.name||"",this.label=i.label||"",this.type=i.type||"",this.isRequired=i.isRequired||0,this.categoryId=i.category_id||1,this.options=JSON.parse(i.options)||[]}}var e=a(9863),h=a(5862),p=a(2713);const v=["pageTop"];function b(o,i){if(1&o&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.s9C("value",t.uuid),e.xp6(1),e.hij(" ",t.name," ")}}function x(o,i){if(1&o&&e._UZ(0,"ion-input",24),2&o){const t=e.oxw(2).$implicit;e.s9C("formControlName",t.name)}}function F(o,i){if(1&o&&e._UZ(0,"ion-textarea",24),2&o){const t=e.oxw(2).$implicit;e.s9C("formControlName",t.name)}}function w(o,i){if(1&o&&(e.TgZ(0,"ion-item",27),e._UZ(1,"ion-radio",11),e.TgZ(2,"ion-label",28),e._uU(3),e.qZA()()),2&o){const t=i.$implicit;e.xp6(1),e.s9C("value",t.value),e.xp6(2),e.Oqu(t.label)}}function P(o,i){if(1&o&&(e.TgZ(0,"ion-radio-group",25),e.YNc(1,w,4,2,"ion-item",26),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.s9C("formControlName",t.name),e.xp6(1),e.Q6J("ngForOf",t.options)}}function C(o,i){if(1&o&&e._UZ(0,"app-star-rating",29),2&o){const t=e.oxw(2),n=t.$implicit,r=t.index,d=e.oxw(3);e.Q6J("name",n.name)("inputForm",d.reviewForm.get("review").at(r))}}function T(o,i){if(1&o&&(e.TgZ(0,"ion-col")(1,"label",20),e._uU(2),e.qZA(),e.YNc(3,x,1,1,"ion-input",21),e.YNc(4,F,1,1,"ion-textarea",21),e.YNc(5,P,2,2,"ion-radio-group",22),e.YNc(6,C,1,2,"app-star-rating",23),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.ekj("required",t.isRequired),e.xp6(1),e.Oqu(t.label),e.xp6(1),e.Q6J("ngIf","TEXT"==t.type),e.xp6(1),e.Q6J("ngIf","TEXTAREA"==t.type),e.xp6(1),e.Q6J("ngIf","RADIO"==t.type),e.xp6(1),e.Q6J("ngIf","STAR"==t.type)}}function Y(o,i){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,T,7,7,"ion-col",10),e.qZA()),2&o){const t=i.$implicit,n=i.index,r=e.oxw().$implicit;e.s9C("formGroupName",n),e.xp6(1),e.Q6J("ngIf",t.categoryId==r.id)}}function S(o,i){if(1&o&&(e.TgZ(0,"div",15)(1,"div",16)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"div",17),e.YNc(5,Y,2,2,"div",18),e.qZA()()()),2&o){const t=i.$implicit,n=i.index,r=e.oxw(2);e.xp6(1),e.ekj("show",n+1==r.currentStep.stepIndex),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngForOf",r.questions)}}function k(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",30)(1,"ion-button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).triggerForm("previous")}),e._uU(2,"Previous"),e.qZA()()}}function y(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",30)(1,"ion-button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).triggerForm("next")}),e._uU(2,"Next"),e.qZA()()}}function O(o,i){if(1&o&&(e.TgZ(0,"ion-col",30)(1,"ion-button",33),e._uU(2,"Submit"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.loading)}}function q(o,i){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col"),e._UZ(2,"app-steps",12),e.YNc(3,S,6,4,"div",13),e.TgZ(4,"ion-row"),e.YNc(5,k,3,0,"ion-col",14),e.YNc(6,y,3,0,"ion-col",14),e.YNc(7,O,3,1,"ion-col",14),e.qZA()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("category",t.questionCat)("currentStep",t.currentStep),e.xp6(1),e.Q6J("ngForOf",t.questionCat),e.xp6(2),e.Q6J("ngIf",t.currentStep.stepIndex>1),e.xp6(1),e.Q6J("ngIf",t.currentStep.stepIndex<t.questionCat.length),e.xp6(1),e.Q6J("ngIf",t.currentStep.stepIndex==t.questionCat.length)}}const Z=[{path:"",component:(()=>{class o{constructor(t,n,r,d,Q,J){this.questionService=t,this.formBuilder=n,this.toastr=r,this.reviewService=d,this.userService=Q,this.stepsService=J,this.subscriptions=new m.w,this.loading=!1,this.menus=[{name:"Your Feedback",class:"active"}],this.showQuestion=!1,this.selectedCatIndex=1}ngOnInit(){this.buildForm(),this.getUserList(),this.getReviewQuestions()}triggerEvent(){this.showQuestion||(this.showQuestion=!0)}buildForm(){this.reviewForm=this.formBuilder.group({user_id:["",[s.kI.required]],review:this.formBuilder.array([])})}reviewFields(){return this.reviewForm.get("review")}getUserList(){this.subscriptions.add(this.userService.getUsers().subscribe(t=>{this.users=t.data}))}getReviewQuestions(){this.subscriptions.add(this.questionService.getQuestions().subscribe(t=>{this.questions=t.data,this.questionCat=t.category,this.stepsService.pushStepCount(this.questionCat.length),this.questions.filter((n,r)=>{this.questions[r]=new f(n)}),this.currentStep=this.stepsService.steps$[0],this.addFieldsToForm()}))}addFieldsToForm(){this.questions.forEach(t=>{const n={};n[t.name]=["",t.isRequired?[s.kI.required]:[]],this.reviewFields().push(this.formBuilder.group(n))})}triggerForm(t){"next"==t&&this.currentStep.stepIndex!=this.questionCat.length&&(this.stepsService.moveToNextStep(this.currentStep.stepIndex),this.currentStep=this.stepsService.currentStep$),"previous"==t&&(this.stepsService.moveToPrevStep(this.currentStep.stepIndex),this.currentStep=this.stepsService.currentStep$),this.pageTop.scrollToTop()}submitReview(){this.reviewForm.invalid?this.toastr.basic("All the fields are required. Please check and populate all the items!!","warning"):(this.loading=!0,this.reviewService.saveUserReview(this.reviewForm.value).subscribe(t=>{this.reviewForm.reset(),this.currentStep=this.stepsService.steps$[0],this.toastr.basic("Your review submitted Successfully!!!"),this.loading=!1,this.pageTop.scrollToTop(),this.stepsService.pushStepCount(this.questionCat.length),this.stepsService.resetStepperCount()},t=>{this.toastr.basic(t.statusText,"warning"),this.loading=!1}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qJ),e.Y36(s.qu),e.Y36(u._W),e.Y36(u.Pj),e.Y36(u.KD),e.Y36(h.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-your-feedback"]],viewQuery:function(t,n){if(1&t&&e.Gf(v,5),2&t){let r;e.iGM(r=e.CRH())&&(n.pageTop=r.first)}},decls:17,vars:4,consts:[[1,"ion-padding"],["pageTop",""],[1,"m-t-4"],[3,"menus"],[1,"user-review",3,"formGroup","ngSubmit"],["size-md","4"],[1,"form-floating"],["id","floatingSelect","aria-label","Floating label select example","formControlName","user_id",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect",1,"required"],[4,"ngIf"],[3,"value"],[3,"category","currentStep"],["size","12",4,"ngFor","ngForOf"],["size","6","size-sm","4",4,"ngIf"],["size","12"],[1,"dynamic-inputs"],["formArrayName","review"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"form-label"],[3,"formControlName",4,"ngIf"],["value","custom-checked",3,"formControlName",4,"ngIf"],[3,"name","inputForm",4,"ngIf"],[3,"formControlName"],["value","custom-checked",3,"formControlName"],["class","custom-radio-btn","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"custom-radio-btn"],[1,"pd-left-1"],[3,"name","inputForm"],["size","6","size-sm","4"],["expand","full","color","medium","type","button",3,"click"],["expand","full","color","primary","type","button",3,"click"],["expand","full","color","success","type","submit",3,"disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0,1)(2,"ion-grid",2),e._UZ(3,"app-breadcrumb",3),e.TgZ(4,"ion-row")(5,"ion-col")(6,"form",4),e.NdJ("ngSubmit",function(){return n.submitReview()}),e.TgZ(7,"h2"),e._uU(8,"Please select colleague and give your feedback"),e.qZA(),e.TgZ(9,"ion-row")(10,"ion-col",5)(11,"div",6)(12,"select",7),e.NdJ("change",function(){return n.triggerEvent()}),e.YNc(13,b,2,2,"option",8),e.qZA(),e.TgZ(14,"label",9),e._uU(15,"Select Colleague"),e.qZA()()()(),e.YNc(16,q,8,6,"ion-row",10),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("menus",n.menus),e.xp6(3),e.Q6J("formGroup",n.reviewForm),e.xp6(7),e.Q6J("ngForOf",n.users),e.xp6(3),e.Q6J("ngIf",n.showQuestion))},directives:[c.W2,c.jY,p.LI,c.Nd,c.wI,s._Y,s.JL,s.sg,s.EJ,s.JJ,s.u,l.sg,s.YN,s.Kr,l.O5,p.GT,s.CE,s.x0,c.pK,c.j9,c.g2,c.se,c.QI,c.Ie,c.B7,c.U5,c.Q$,p.Te,c.YG],styles:['.pd-left-1[_ngcontent-%COMP%]{padding-left:.5rem}.required[_ngcontent-%COMP%]:after{content:" *";color:red}.user-review[_ngcontent-%COMP%]   .form-star-input[_ngcontent-%COMP%]{margin-bottom:1rem}.user-review[_ngcontent-%COMP%]   .form-star-input[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block}.user-review[_ngcontent-%COMP%]   ion-radio-group[_ngcontent-%COMP%]{display:block}.user-review[_ngcontent-%COMP%]   ion-radio-group[_ngcontent-%COMP%]   .custom-radio-btn[_ngcontent-%COMP%]{display:inline-block;--background: #f9f9f9;color:#7a7a7a;font-weight:500}.user-review[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], .user-review[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.375rem}.form-page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.step-page-container[_ngcontent-%COMP%]{flex:1;margin:0 32px}.form-continue-btn[_ngcontent-%COMP%]{background:#320ae5;margin:32px}.form-continue-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed!important}.common-btn[_ngcontent-%COMP%]{color:#fff;background:#320ae5;padding:20px;border-radius:50px;font-size:1.15em;cursor:pointer;border:none!important}.dynamic-inputs[_ngcontent-%COMP%]{display:none}.dynamic-inputs[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:#d8d6d6;margin:0;padding:.5rem .8rem;font-size:27px}.dynamic-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem .8rem 0}.show[_ngcontent-%COMP%]{display:block!important}']}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[_.Bz.forChild(Z)],_.Bz]}),o})();var N=a(7205);let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.ez,s.u5,c.Pc,s.UX,M,N.m]]}),o})()}}]);