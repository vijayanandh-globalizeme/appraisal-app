"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7378],{7378:(M,g,r)=>{r.r(g),r.d(g,{UserFeedbackPageModule:()=>q});var l=r(9808),d=r(4182),a=r(2159),u=r(127),f=r(2654),p=r(3577);class _{constructor(n){this.data=n||[]}}class h{constructor(n){this.pipe=new l.uU("en-US"),this.comments=n.comments||"",this.created_at=this.pipe.transform(n.created_at,"fullDate")||"",this.data=JSON.parse(n.data)||"",this.total=n.total||""}}var b=r(2340),e=r(9863),m=r(7859);function v(i,n){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=n.$implicit,s=e.oxw();e.s9C("value",t),e.Q6J("selected",t==s.currentYear),e.xp6(1),e.hij(" ",t," ")}}function w(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-col",20),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).setOpen(!0,c)}),e.TgZ(1,"ion-row")(2,"ion-col")(3,"ion-row")(4,"ion-col")(5,"ion-text",21),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-row")(8,"ion-col"),e._UZ(9,"app-star-rating",22),e.qZA()()()()()}if(2&i){const t=n.$implicit;e.xp6(6),e.Oqu(t.created_at),e.xp6(3),e.Q6J("isDisabled",!0)("selectedValue",t.data[2].overall)}}function x(i,n){if(1&i&&(e.TgZ(0,"ion-grid")(1,"ion-row"),e.YNc(2,w,10,3,"ion-col",19),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.userReviews)}}function U(i,n){1&i&&(e.TgZ(0,"p",23),e._uU(1,"No Results found."),e.qZA())}function Z(i,n){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-star-rating",22),e.qZA()),2&i){const t=e.oxw(2).$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("isDisabled",!0)("selectedValue",s.getValue(t))}}function F(i,n){if(1&i&&(e.TgZ(0,"ion-text",9)(1,"p")(2,"b"),e._uU(3),e.qZA()()()),2&i){const t=e.oxw(2).$implicit,s=e.oxw(2);e.xp6(3),e.Oqu(s.getValue(t))}}function k(i,n){if(1&i&&(e.TgZ(0,"div")(1,"label",29),e._uU(2),e.qZA(),e.YNc(3,Z,2,2,"div",15),e.YNc(4,F,4,1,"ng-template",null,30,e.W1O),e.qZA()),2&i){const t=e.MAs(5),s=e.oxw().$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(o.getLabel(s)),e.xp6(1),e.Q6J("ngIf",o.isStarValue(s))("ngIfElse",t)}}function T(i,n){if(1&i&&(e.TgZ(0,"ion-col",27),e.YNc(1,k,6,3,"div",28),e.qZA()),2&i){const t=n.$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=s.getValue(t)&&""!=s.getValue(t))}}function A(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Review details"),e.qZA(),e.TgZ(4,"ion-buttons",24)(5,"ion-button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().setOpen(!1)}),e._uU(6,"Close"),e.qZA()()()(),e.TgZ(7,"ion-content",0)(8,"ion-row"),e.YNc(9,T,2,1,"ion-col",26),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.selectedRwItem.data)}}const P=[{path:"",component:(()=>{class i{constructor(t,s,o,c){this.activeroute=t,this.router=s,this.userReviewService=o,this.questionService=c,this.subscriptions=new f.w,this.menus=[{name:"Users",href:"/main/users"}],this.user=[],this.selectBoxYear=[2022,2023],this.currentYear=(new Date).getFullYear(),this.selectedYear=2022,this.userReviews=[],this.isModalOpen=!1,this.questions=[]}ngOnInit(){this.subscriptions.add(this.activeroute.queryParams.subscribe(t=>{let s=this.router.getCurrentNavigation().extras.state;s?(this.user=s,this.menus[1]={name:null==s?void 0:s.name,class:"active"},this.getAllreview(),this.getReviewQuestions()):this.router.navigate(["/main/users"])}))}userAvatar(t){return`${b.N.apiURL}/user/${t}/avatar`}setOpen(t,s){this.isModalOpen=t,t&&(this.selectedRwItem=s)}getReviewQuestions(){this.subscriptions.add(this.questionService.getQuestions().subscribe(t=>{let s=[];t.data.length>0&&t.data.forEach(o=>{s[o.name]=o}),this.questions=s}))}getLabel(t){return this.questions[Object.keys(t)[0]].label}getValue(t){return t[Object.keys(t)[0]]}isStarValue(t){return"STAR"==this.questions[Object.keys(t)[0]].type}filterSelectValue(t){let s;return this.selectedRwItem.data.forEach(o=>{o[t]&&null!=o[t]&&null!=o[t]&&(s=o[t])}),s}getAllreview(){this.userReviews=[],this.subscriptions.add(this.userReviewService.getAllreviews(this.user.uuid,this.selectedYear).subscribe(t=>{new _(t.data).data.filter(o=>{this.userReviews.push(new h(o))})}))}changYear(t){this.selectedYear=t,this.getAllreview()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(p.Pj),e.Y36(p.qJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-feedback"]],decls:29,vars:9,consts:[[1,"ion-padding"],[1,"m-t-4"],[3,"menus"],[1,"card-header"],["size","12","size-sm","8"],["size","3","size-sm","2"],["item-left","",1,"user-thumbnail-default"],[3,"src"],["size","9","size-sm","10"],["color","primary"],["size","12","size-sm","4"],[1,"form-floating"],["aria-label","Floating label select example",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","floatingSelect"],[4,"ngIf","ngIfElse"],["emptyMessage",""],[3,"isOpen","backdropDismiss"],[3,"value","selected"],["size","12","size-sm","6","class","user-card","expand","block",3,"click",4,"ngFor","ngForOf"],["size","12","size-sm","6","expand","block",1,"user-card",3,"click"],["color","medium"],[3,"isDisabled","selectedValue"],[1,"label","label-warning"],["slot","end"],[3,"click"],["size","12",4,"ngFor","ngForOf"],["size","12"],[4,"ngIf"],[1,"form-label"],["other_content",""]],template:function(t,s){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-grid",1),e._UZ(2,"app-breadcrumb",2),e.TgZ(3,"ion-row",3)(4,"ion-col",4)(5,"ion-row")(6,"ion-col",5)(7,"ion-thumbnail",6),e._UZ(8,"img",7),e.qZA()(),e.TgZ(9,"ion-col",8)(10,"ion-row")(11,"ion-col")(12,"ion-text"),e._uU(13),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col")(16,"ion-text",9),e._uU(17),e.qZA()()()()()(),e.TgZ(18,"ion-col",10)(19,"div",11)(20,"select",12),e.NdJ("change",function(c){return s.changYear(c.target.value)}),e.YNc(21,v,2,3,"option",13),e.qZA(),e.TgZ(22,"label",14),e._uU(23,"Select Year"),e.qZA()()()()(),e.YNc(24,x,3,1,"ion-grid",15),e.YNc(25,U,2,0,"ng-template",null,16,e.W1O),e.TgZ(27,"ion-modal",17),e.YNc(28,A,10,1,"ng-template"),e.qZA()()),2&t){const o=e.MAs(26);e.xp6(2),e.Q6J("menus",s.menus),e.xp6(6),e.s9C("src",s.userAvatar(s.user.uuid),e.LSH),e.xp6(5),e.Oqu(s.user.name),e.xp6(4),e.hij(" (",s.user.email,") "),e.xp6(4),e.Q6J("ngForOf",s.selectBoxYear),e.xp6(3),e.Q6J("ngIf",s.userReviews.length>0)("ngIfElse",o),e.xp6(3),e.Q6J("isOpen",s.isModalOpen)("backdropDismiss",!1)}},directives:[a.W2,a.jY,m.LI,a.Nd,a.wI,a.Bs,a.yW,l.sg,d.YN,d.Kr,l.O5,m.Te,a.ki,a.Gu,a.sr,a.wd,a.Sm,a.YG],styles:[".user-cmts[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.card-header[_ngcontent-%COMP%]{background:#f4f4f4;margin:16px 8px;padding:0 10px}.form-floating[_ngcontent-%COMP%]{margin:10px 0}.hg-comments[_ngcontent-%COMP%]{margin-top:2rem;background:#f3f3f3;padding:1rem}"]}),i})()}];let O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.Bz.forChild(P)],u.Bz]}),i})();var Y=r(7205);let q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.ez,d.u5,a.Pc,O,Y.m]]}),i})()}}]);