"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3861],{3861:(S,g,i)=>{i.r(g),i.d(g,{LoginModule:()=>L});var u=i(9808),h=i(4182),r=i(2159),c=i(127),f=i(2340),m=i(2654),d=i(7224),a=i(3577),e=i(9863);const v=[{path:"",component:(()=>{class t{constructor(o,n,l,P,y){this.router=o,this.activeroute=n,this.authService=l,this.storageService=P,this.toastr=y,this.subscriptions=new m.w}ngOnInit(){this.subscriptions.add(this.activeroute.queryParams.subscribe(o=>{o&&o.access_token&&o.expires_at&&this.refreshUserData(o)}))}gotoMSLogin(){this.authService.destorySession(),window.location.href=`${f.N.apiURL}/oauth`}refreshUserData(o){this.storageService.setItem("accessToken",o.access_token),this.storageService.setItem("expiredAt",o.expires_at),this.authService.getUserData().pipe((0,d.P)()).subscribe(n=>{n.email&&(this.storageService.setItem("clientData",JSON.stringify(n)),this.router.navigate(["/main"]))},n=>{this.toastr.basic(n.statusText,"warning")})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.F0),e.Y36(c.gz),e.Y36(a.e8),e.Y36(a.V1),e.Y36(a._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["page-login"]],decls:7,vars:0,consts:[[1,"float-center"],[1,"login-logo"],["src","assets/img/logo.png","alt","Ionic logo"],["color","tertiary",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-content")(1,"ion-row",0)(2,"ion-col")(3,"div",1),e._UZ(4,"img",2),e.qZA(),e.TgZ(5,"ion-button",3),e.NdJ("click",function(){return n.gotoMSLogin()}),e._uU(6,"Login with Microsoft"),e.qZA()()()())},directives:[r.W2,r.Nd,r.wI,r.YG],styles:[".float-center[_ngcontent-%COMP%]{text-align:center;display:flex;align-items:center;justify-content:center;height:100vh}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:360px;margin-bottom:2rem}"]}),t})()}];let p=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(v)],c.Bz]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,h.u5,r.Pc,p]]}),t})()}}]);