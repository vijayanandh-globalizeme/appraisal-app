"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7378],{7378:(R,g,c)=>{c.r(g),c.d(g,{UserFeedbackPageModule:()=>Y});var l=c(9808),d=c(4182),r=c(2159),u=c(127),h=c(2654),p=c(3577);class f{constructor(o){this.data=o||[]}}class b{constructor(o){this.pipe=new l.uU("en-US"),this.id=o.id||0,this.comments=o.comments||"",this.created_at=this.pipe.transform(o.created_at,"fullDate")||"",this.data=JSON.parse(o.data)||"",this.total=o.total||""}}var m=c(2340),e=c(9863),_=c(2713);function v(i,o){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=o.$implicit,s=e.oxw();e.s9C("value",t),e.Q6J("selected",t==s.currentYear),e.xp6(1),e.hij(" ",t," ")}}function w(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-col",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).setOpen(!0,a)}),e.TgZ(1,"ion-row")(2,"ion-col")(3,"ion-row")(4,"ion-col")(5,"ion-text",21),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-row")(8,"ion-col"),e._UZ(9,"app-star-rating",22),e.qZA()()()()()}if(2&i){const t=o.$implicit;e.xp6(6),e.Oqu(t.created_at),e.xp6(3),e.Q6J("isDisabled",!0)("selectedValue",t.total)}}function x(i,o){if(1&i&&(e.TgZ(0,"ion-grid")(1,"ion-row"),e.YNc(2,w,10,3,"ion-col",19),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.userReviews)}}function U(i,o){1&i&&(e.TgZ(0,"p",23),e._uU(1,"No Results found."),e.qZA())}function Z(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-star-rating",22),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("isDisabled",!0)("selectedValue",t.value)}}function k(i,o){if(1&i&&(e.TgZ(0,"ion-text",9)(1,"p")(2,"b"),e._uU(3),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.value)}}function F(i,o){if(1&i&&(e.TgZ(0,"ion-col",32)(1,"label",33),e._uU(2),e.qZA(),e.YNc(3,Z,2,2,"div",15),e.YNc(4,k,4,1,"ng-template",null,34,e.W1O),e.qZA()),2&i){const t=o.$implicit,s=e.MAs(5);e.xp6(2),e.Oqu(t.question),e.xp6(1),e.Q6J("ngIf","STAR"==t.type)("ngIfElse",s)}}function T(i,o){if(1&i&&(e.TgZ(0,"ion-accordion",27)(1,"ion-item",29)(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"div",30)(5,"ion-row"),e.YNc(6,F,6,3,"ion-col",31),e.qZA()()()),2&i){const t=o.$implicit;e.s9C("value",t.name),e.xp6(3),e.Oqu(t.name),e.xp6(3),e.Q6J("ngForOf",t.data)}}const O=function(){return["Others"]};function P(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Review details"),e.qZA(),e.TgZ(4,"ion-buttons",24)(5,"ion-button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().setOpen(!1)}),e._uU(6,"Close"),e.qZA()()()(),e.TgZ(7,"ion-content",0)(8,"ion-button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().downloadPdf()}),e._uU(9,"Download"),e.qZA(),e.TgZ(10,"ion-accordion-group",27),e.YNc(11,T,7,3,"ion-accordion",28),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("disabled",t.downloadDisabled),e.xp6(2),e.Q6J("value",e.DdM(3,O)),e.xp6(1),e.Q6J("ngForOf",t.questionCat)}}const A=[{path:"",component:(()=>{class i{constructor(t,s,n,a){this.activeroute=t,this.router=s,this.userReviewService=n,this.questionService=a,this.subscriptions=new h.w,this.menus=[{name:"Users",href:"/main/users"}],this.user=[],this.selectBoxYear=[2022,2023],this.currentYear=(new Date).getFullYear(),this.selectedYear=2023,this.userReviews=[],this.isModalOpen=!1,this.questions=[],this.downloadDisabled=!1}ngOnInit(){this.subscriptions.add(this.activeroute.queryParams.subscribe(t=>{let s=this.router.getCurrentNavigation().extras.state;s?(this.user=s,this.menus[1]={name:null==s?void 0:s.name,class:"active"},this.getAllreview(),this.getReviewQuestions()):this.router.navigate(["/main/users"])}))}userAvatar(t){return`${m.N.apiURL}/user/${t}/avatar`}setOpen(t,s){this.isModalOpen=t,t&&(this.selectedRwItem=s,this.mapQuestionWithCategory())}getReviewQuestions(){this.subscriptions.add(this.questionService.getQuestions().subscribe(t=>{let s=[];t.data.length>0&&(this.questionCat=t.category,t.data.forEach(n=>{s[n.name]=n})),this.questions=s}))}mapQuestionWithCategory(){this.questionCat.forEach((t,s)=>{let n=[];this.selectedRwItem.data.forEach(a=>{this.questions[Object.keys(a)[0]].category_id==t.id&&(a.question=this.questions[Object.keys(a)[0]].label,a.value=a[Object.keys(a)[0]],a.type=this.questions[Object.keys(a)[0]].type,n.push(a))}),this.questionCat[s].data=n})}filterSelectValue(t){let s;return this.selectedRwItem.data.forEach(n=>{n[t]&&null!=n[t]&&null!=n[t]&&(s=n[t])}),s}getAllreview(){this.userReviews=[],this.subscriptions.add(this.userReviewService.getAllreviews(this.user.uuid,this.selectedYear).subscribe(t=>{new f(t.data).data.filter((n,a)=>{this.userReviews.push(new b(n)),this.userReviews[a].total=this.getStarValue(this.userReviews[a].data)})}))}getStarValue(t){let s;return t.forEach(n=>{"overall"==Object.keys(n)[0]&&(s=n[Object.keys(n)[0]])}),s}changYear(t){this.selectedYear=t,this.getAllreview()}downloadPdf(){window.open(m.N.apiURL+"/download-report/"+this.selectedRwItem.id+"/download","_blank")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(p.Pj),e.Y36(p.qJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-feedback"]],decls:29,vars:9,consts:[[1,"ion-padding"],[1,"m-t-4"],[3,"menus"],[1,"card-header"],["size","12","size-sm","8"],["size","3","size-sm","2"],["item-left","",1,"user-thumbnail-default"],[3,"src"],["size","9","size-sm","10"],["color","primary"],["size","12","size-sm","4"],[1,"form-floating"],["aria-label","Floating label select example",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","floatingSelect"],[4,"ngIf","ngIfElse"],["emptyMessage",""],[3,"isOpen","backdropDismiss"],[3,"value","selected"],["size","12","size-sm","6","class","user-card","expand","block",3,"click",4,"ngFor","ngForOf"],["size","12","size-sm","6","expand","block",1,"user-card",3,"click"],["color","medium"],[3,"isDisabled","selectedValue"],[1,"label","label-warning"],["slot","end"],[3,"click"],[3,"disabled","click"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["size","12",4,"ngFor","ngForOf"],["size","12"],[1,"form-label"],["other_content",""]],template:function(t,s){if(1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-grid",1),e._UZ(2,"app-breadcrumb",2),e.TgZ(3,"ion-row",3)(4,"ion-col",4)(5,"ion-row")(6,"ion-col",5)(7,"ion-thumbnail",6),e._UZ(8,"img",7),e.qZA()(),e.TgZ(9,"ion-col",8)(10,"ion-row")(11,"ion-col")(12,"ion-text"),e._uU(13),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col")(16,"ion-text",9),e._uU(17),e.qZA()()()()()(),e.TgZ(18,"ion-col",10)(19,"div",11)(20,"select",12),e.NdJ("change",function(a){return s.changYear(a.target.value)}),e.YNc(21,v,2,3,"option",13),e.qZA(),e.TgZ(22,"label",14),e._uU(23,"Select Year"),e.qZA()()()()(),e.YNc(24,x,3,1,"ion-grid",15),e.YNc(25,U,2,0,"ng-template",null,16,e.W1O),e.TgZ(27,"ion-modal",17),e.YNc(28,P,12,4,"ng-template"),e.qZA()()),2&t){const n=e.MAs(26);e.xp6(2),e.Q6J("menus",s.menus),e.xp6(6),e.s9C("src",s.userAvatar(s.user.uuid),e.LSH),e.xp6(5),e.Oqu(s.user.name),e.xp6(4),e.hij(" (",s.user.email,") "),e.xp6(4),e.Q6J("ngForOf",s.selectBoxYear),e.xp6(3),e.Q6J("ngIf",s.userReviews.length>0)("ngIfElse",n),e.xp6(3),e.Q6J("isOpen",s.isModalOpen)("backdropDismiss",!1)}},directives:[r.W2,r.jY,_.LI,r.Nd,r.wI,r.Bs,r.yW,l.sg,d.YN,d.Kr,l.O5,_.Te,r.ki,r.Gu,r.sr,r.wd,r.Sm,r.YG,r.eh,r.We,r.Ie,r.Q$],styles:[".user-cmts[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.card-header[_ngcontent-%COMP%]{background:#f4f4f4;margin:16px 8px;padding:0 10px}.form-floating[_ngcontent-%COMP%]{margin:10px 0}.hg-comments[_ngcontent-%COMP%]{margin-top:2rem;background:#f3f3f3;padding:1rem}"]}),i})()}];let q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),i})();var y=c(7205);let Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.ez,d.u5,r.Pc,q,y.m]]}),i})()}}]);